---
title: "Nick's R Cheat Sheet"
author: "Nicholas Vasile"
date: "2019-01-28"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---



<p><a href="https://github.com/startupjing/Tech_Notes/blob/master/R/R_language.md">Another R cheat sheet</a></p>
<div id="selecting-attributes-from-a-data-frame" class="section level3">
<h3>Selecting attributes from a data frame</h3>
<pre class="r"><code># data [row, attribute_name]
iris[ 1, &quot;Species&quot;] 
#&gt; [1] setosa
#&gt; Levels: setosa versicolor virginica

# approach 1: use [[ form of extract operator to extract a column
iris[[&quot;Species&quot;]] %&gt;% 
  head()
#&gt; [1] setosa setosa setosa setosa setosa setosa
#&gt; Levels: setosa versicolor virginica

# approach 2: use variable name in column dimension of data frame
iris[,&quot;Species&quot;] %&gt;% 
  head()
#&gt; [1] setosa setosa setosa setosa setosa setosa
#&gt; Levels: setosa versicolor virginica
# approach 3: use the $ form of extract operator. Note that since this
iris$Species %&gt;% 
  head()
#&gt; [1] setosa setosa setosa setosa setosa setosa
#&gt; Levels: setosa versicolor virginica

#Use individual variables in a pipe
ggplot2::diamonds %&gt;% 
  .$cut %&gt;% 
  head()
#&gt; [1] Ideal     Premium   Good      Premium   Good      Very Good
#&gt; Levels: Fair &lt; Good &lt; Very Good &lt; Premium &lt; Ideal

ggplot2::diamonds %&gt;% 
  dplyr::pull(cut) %&gt;% 
  head()
#&gt; [1] Ideal     Premium   Good      Premium   Good      Very Good
#&gt; Levels: Fair &lt; Good &lt; Very Good &lt; Premium &lt; Ideal</code></pre>
</div>
<div id="subsetting-rows" class="section level3">
<h3>subsetting rows</h3>
<pre class="r"><code># approach 1: use exact row references
# dataframe[rows, columns]
mtcars[20:22,]
#&gt;                   mpg cyl  disp  hp drat    wt  qsec vs am gear carb
#&gt; Toyota Corolla   33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
#&gt; Toyota Corona    21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
#&gt; Dodge Challenger 15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2

# approach 2: use logic in the row dimension of reference
head(mtcars[mtcars$cyl == 4 &amp; mtcars$am == 1,])
#&gt;                 mpg cyl  disp hp drat    wt  qsec vs am gear carb
#&gt; Datsun 710     22.8   4 108.0 93 3.85 2.320 18.61  1  1    4    1
#&gt; Fiat 128       32.4   4  78.7 66 4.08 2.200 19.47  1  1    4    1
#&gt; Honda Civic    30.4   4  75.7 52 4.93 1.615 18.52  1  1    4    2
#&gt; Toyota Corolla 33.9   4  71.1 65 4.22 1.835 19.90  1  1    4    1
#&gt; Fiat X1-9      27.3   4  79.0 66 4.08 1.935 18.90  1  1    4    1
#&gt; Porsche 914-2  26.0   4 120.3 91 4.43 2.140 16.70  0  1    5    2
head(mtcars[mtcars[,&quot;cyl&quot;] == 4,])
#&gt;                 mpg cyl  disp hp drat    wt  qsec vs am gear carb
#&gt; Datsun 710     22.8   4 108.0 93 3.85 2.320 18.61  1  1    4    1
#&gt; Merc 240D      24.4   4 146.7 62 3.69 3.190 20.00  1  0    4    2
#&gt; Merc 230       22.8   4 140.8 95 3.92 3.150 22.90  1  0    4    2
#&gt; Fiat 128       32.4   4  78.7 66 4.08 2.200 19.47  1  1    4    1
#&gt; Honda Civic    30.4   4  75.7 52 4.93 1.615 18.52  1  1    4    2
#&gt; Toyota Corolla 33.9   4  71.1 65 4.22 1.835 19.90  1  1    4    1

# approach 3: use which() function
theSubsetRows &lt;- which(mtcars$cyl == 4)
head(mtcars[theSubsetRows,])
#&gt;                 mpg cyl  disp hp drat    wt  qsec vs am gear carb
#&gt; Datsun 710     22.8   4 108.0 93 3.85 2.320 18.61  1  1    4    1
#&gt; Merc 240D      24.4   4 146.7 62 3.69 3.190 20.00  1  0    4    2
#&gt; Merc 230       22.8   4 140.8 95 3.92 3.150 22.90  1  0    4    2
#&gt; Fiat 128       32.4   4  78.7 66 4.08 2.200 19.47  1  1    4    1
#&gt; Honda Civic    30.4   4  75.7 52 4.93 1.615 18.52  1  1    4    2
#&gt; Toyota Corolla 33.9   4  71.1 65 4.22 1.835 19.90  1  1    4    1

# approach 4: use output from a function that returns a logical
#             array instead of row numbers as in the prior example
head(mtcars[!is.na(mtcars[,&quot;cyl&quot;]),])
#&gt;                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
#&gt; Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
#&gt; Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
#&gt; Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
#&gt; Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
#&gt; Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1

# subset all rows with select  columns
# dataframe[, c(&quot;column1&quot;, &quot;column2&quot;)]
head(mtcars[, c(&quot;mpg&quot;, &quot;carb&quot;)])
#&gt;                    mpg carb
#&gt; Mazda RX4         21.0    4
#&gt; Mazda RX4 Wag     21.0    4
#&gt; Datsun 710        22.8    1
#&gt; Hornet 4 Drive    21.4    1
#&gt; Hornet Sportabout 18.7    2
#&gt; Valiant           18.1    1

# subset all rows where attribute matches
# dataframe[dataframe$attribute ==&quot;value&quot;, ] 
mtcars[mtcars$cyl==4,]
#&gt;                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
#&gt; Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
#&gt; Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
#&gt; Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
#&gt; Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
#&gt; Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
#&gt; Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
#&gt; Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
#&gt; Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
#&gt; Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
#&gt; Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
#&gt; Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</code></pre>
</div>
<div id="filtering-extracting-subsetting-data-frames-based-on-attribute-value" class="section level3">
<h3>Filtering / extracting / subsetting data frames based on attribute value</h3>
<pre class="r"><code>mtcars[which(mtcars$cyl == 4), &quot;mpg&quot;]
#&gt;  [1] 22.8 24.4 22.8 32.4 30.4 33.9 21.5 27.3 26.0 30.4 21.4
subset(mtcars$mpg, mtcars$cyl == 4)
#&gt;  [1] 22.8 24.4 22.8 32.4 30.4 33.9 21.5 27.3 26.0 30.4 21.4</code></pre>
</div>
<div id="exploring-data" class="section level3">
<h3>Exploring data</h3>
<pre class="r"><code>#summary stats from pastecs package
pastecs::stat.desc(mtcars)
#&gt;                      mpg         cyl         disp           hp
#&gt; nbr.val       32.0000000  32.0000000 3.200000e+01   32.0000000
#&gt; nbr.null       0.0000000   0.0000000 0.000000e+00    0.0000000
#&gt; nbr.na         0.0000000   0.0000000 0.000000e+00    0.0000000
#&gt; min           10.4000000   4.0000000 7.110000e+01   52.0000000
#&gt; max           33.9000000   8.0000000 4.720000e+02  335.0000000
#&gt; range         23.5000000   4.0000000 4.009000e+02  283.0000000
#&gt; sum          642.9000000 198.0000000 7.383100e+03 4694.0000000
#&gt; median        19.2000000   6.0000000 1.963000e+02  123.0000000
#&gt; mean          20.0906250   6.1875000 2.307219e+02  146.6875000
#&gt; SE.mean        1.0654240   0.3157093 2.190947e+01   12.1203173
#&gt; CI.mean.0.95   2.1729465   0.6438934 4.468466e+01   24.7195501
#&gt; var           36.3241028   3.1895161 1.536080e+04 4700.8669355
#&gt; std.dev        6.0269481   1.7859216 1.239387e+02   68.5628685
#&gt; coef.var       0.2999881   0.2886338 5.371779e-01    0.4674077
#&gt;                      drat          wt        qsec          vs          am
#&gt; nbr.val       32.00000000  32.0000000  32.0000000 32.00000000 32.00000000
#&gt; nbr.null       0.00000000   0.0000000   0.0000000 18.00000000 19.00000000
#&gt; nbr.na         0.00000000   0.0000000   0.0000000  0.00000000  0.00000000
#&gt; min            2.76000000   1.5130000  14.5000000  0.00000000  0.00000000
#&gt; max            4.93000000   5.4240000  22.9000000  1.00000000  1.00000000
#&gt; range          2.17000000   3.9110000   8.4000000  1.00000000  1.00000000
#&gt; sum          115.09000000 102.9520000 571.1600000 14.00000000 13.00000000
#&gt; median         3.69500000   3.3250000  17.7100000  0.00000000  0.00000000
#&gt; mean           3.59656250   3.2172500  17.8487500  0.43750000  0.40625000
#&gt; SE.mean        0.09451874   0.1729685   0.3158899  0.08909831  0.08820997
#&gt; CI.mean.0.95   0.19277224   0.3527715   0.6442617  0.18171719  0.17990541
#&gt; var            0.28588135   0.9573790   3.1931661  0.25403226  0.24899194
#&gt; std.dev        0.53467874   0.9784574   1.7869432  0.50401613  0.49899092
#&gt; coef.var       0.14866382   0.3041285   0.1001159  1.15203687  1.22828533
#&gt;                     gear       carb
#&gt; nbr.val       32.0000000 32.0000000
#&gt; nbr.null       0.0000000  0.0000000
#&gt; nbr.na         0.0000000  0.0000000
#&gt; min            3.0000000  1.0000000
#&gt; max            5.0000000  8.0000000
#&gt; range          2.0000000  7.0000000
#&gt; sum          118.0000000 90.0000000
#&gt; median         4.0000000  2.0000000
#&gt; mean           3.6875000  2.8125000
#&gt; SE.mean        0.1304266  0.2855297
#&gt; CI.mean.0.95   0.2660067  0.5823417
#&gt; var            0.5443548  2.6088710
#&gt; std.dev        0.7378041  1.6152000
#&gt; coef.var       0.2000825  0.5742933

#Counting NULL values in column
sum(is.na(mtcars$cyl))
#&gt; [1] 0</code></pre>
</div>
<div id="prevent-garbage-characters-when-using-read.csv-on-data-exported-from-sql" class="section level3">
<h3>Prevent garbage characters when using read.csv on data exported from SQL</h3>
<pre class="r"><code>#SOURCE: http://stackoverflow.com/questions/24568056/rs-read-csv-prepending-1st-column-name-with-junk-text
read.csv(file = &quot;my_file.csv&quot;, fileEncoding = &quot;UTF-8-BOM&quot;)</code></pre>
</div>
<div id="list-functions-exported-by-a-loaded-package" class="section level3">
<h3>List functions exported by a loaded package</h3>
<pre class="r"><code>head(ls(&quot;package:base&quot;))
#&gt; [1] &quot;-&quot;         &quot;-.Date&quot;    &quot;-.POSIXt&quot;  &quot;!&quot;         &quot;!.hexmode&quot; &quot;!.octmode&quot;</code></pre>
</div>
<div id="count-occurrences-of-unique-values" class="section level3">
<h3>Count occurrences of unique values</h3>
<pre class="r"><code>table(mtcars$cyl)
#&gt; 
#&gt;  4  6  8 
#&gt; 11  7 14
dplyr::count(mtcars, cyl)
#&gt; # A tibble: 3 x 2
#&gt;     cyl     n
#&gt;   &lt;dbl&gt; &lt;int&gt;
#&gt; 1     4    11
#&gt; 2     6     7
#&gt; 3     8    14
as.data.frame(table(mtcars$cyl))
#&gt;   Var1 Freq
#&gt; 1    4   11
#&gt; 2    6    7
#&gt; 3    8   14

dplyr::count(mtcars, cyl, gear)
#&gt; # A tibble: 8 x 3
#&gt;     cyl  gear     n
#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
#&gt; 1     4     3     1
#&gt; 2     4     4     8
#&gt; 3     4     5     2
#&gt; 4     6     3     2
#&gt; 5     6     4     4
#&gt; 6     6     5     1
#&gt; 7     8     3    12
#&gt; 8     8     5     2
xtabs(~cyl + gear, mtcars)
#&gt;    gear
#&gt; cyl  3  4  5
#&gt;   4  1  8  2
#&gt;   6  2  4  1
#&gt;   8 12  0  2

#Get table with row and column sums
addmargins(table(mtcars$cyl,useNA = &quot;always&quot;))
#&gt; 
#&gt;    4    6    8 &lt;NA&gt;  Sum 
#&gt;   11    7   14    0   32
#Get percentage table
addmargins(sort(prop.table(table(mtcars$cyl,useNA = &quot;always&quot;))))
#&gt; 
#&gt;    &lt;NA&gt;       6       4       8     Sum 
#&gt; 0.00000 0.21875 0.34375 0.43750 1.00000</code></pre>
</div>
<div id="check-for-duplicate-values" class="section level3">
<h3>Check for duplicate values</h3>
<pre class="r"><code>length(unique(nps$email))==nrow(nps)

#pull duplicate values
nycflights13::planes %&gt;%
        dplyr::count(tailnum) %&gt;%
        dplyr::filter(n &gt; 1)

nycflights13::weather %&gt;%
        dplyr::count(year, month, day, hour, origin) %&gt;%
        filter(n &gt; 1)</code></pre>
</div>
<div id="build-and-install-vignettes" class="section level3">
<h3>Build and install vignettes</h3>
<pre class="r"><code>devtools::install(build_vignettes = TRUE)</code></pre>
</div>
<div id="string-filtering" class="section level3">
<h3>String filtering</h3>
<pre class="r"><code>#filter output of names - or any other character vector
row.names(mtcars)[grepl(&quot;Merc&quot;,row.names(mtcars))]
#&gt; [1] &quot;Merc 240D&quot;   &quot;Merc 230&quot;    &quot;Merc 280&quot;    &quot;Merc 280C&quot;   &quot;Merc 450SE&quot; 
#&gt; [6] &quot;Merc 450SL&quot;  &quot;Merc 450SLC&quot;
names(mtcars)[grepl(&quot;c&quot;, names(mtcars))]
#&gt; [1] &quot;cyl&quot;  &quot;qsec&quot; &quot;carb&quot;
grep(&quot;C&quot;, names(mtcars), ignore.case = TRUE, value = TRUE)
#&gt; [1] &quot;cyl&quot;  &quot;qsec&quot; &quot;carb&quot;
grep(&quot;C&quot;, names(mtcars), ignore.case = TRUE, value = FALSE)
#&gt; [1]  2  7 11

#Filter with dplyr where row cointains string
dplyr::filter(ggplot2::diamonds, grepl(&#39;Good&#39;, cut))
#&gt; # A tibble: 16,988 x 10
#&gt;    carat cut       color clarity depth table price     x     y     z
#&gt;    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31
#&gt;  2  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75
#&gt;  3  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48
#&gt;  4  0.24 Very Good I     VVS1     62.3    57   336  3.95  3.98  2.47
#&gt;  5  0.26 Very Good H     SI1      61.9    55   337  4.07  4.11  2.53
#&gt;  6  0.23 Very Good H     VS1      59.4    61   338  4     4.05  2.39
#&gt;  7  0.3  Good      J     SI1      64      55   339  4.25  4.28  2.73
#&gt;  8  0.3  Good      J     SI1      63.4    54   351  4.23  4.29  2.7 
#&gt;  9  0.3  Good      J     SI1      63.8    56   351  4.23  4.26  2.71
#&gt; 10  0.3  Very Good J     SI1      62.7    59   351  4.21  4.27  2.66
#&gt; # ... with 16,978 more rows

#Filter column/attribute of data frame for regex text pattern match
nycflights13::airports %&gt;%
  dplyr::filter(stringr::str_detect(name, &quot;County&quot;)) %&gt;% 
  head()
#&gt; # A tibble: 6 x 8
#&gt;   faa   name                      lat    lon   alt    tz dst   tzone       
#&gt;   &lt;chr&gt; &lt;chr&gt;                   &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;       
#&gt; 1 0G6   Williams County Airport  41.5  -84.5   730    -5 A     America/New~
#&gt; 2 0S9   Jefferson County Intl    48.1 -123.    108    -8 A     America/Los~
#&gt; 3 0W3   Harford County Airport   39.6  -76.2   409    -5 A     America/New~
#&gt; 4 17G   Port Bucyrus-Crawford ~  40.8  -83.0  1003    -5 A     America/New~
#&gt; 5 19A   Jackson County Airport   34.2  -83.6   951    -5 U     America/New~
#&gt; 6 24J   Suwannee County Airport  30.3  -83.0   104    -5 A     America/New~

#Search for, and extract matches
pattern &lt;- &quot;[[:upper:]]&quot;
stringr::sentences %&gt;%
        stringr::str_subset(pattern) %&gt;%
        stringr::str_extract_all(pattern) %&gt;% 
  head()
#&gt; [[1]]
#&gt; [1] &quot;T&quot;
#&gt; 
#&gt; [[2]]
#&gt; [1] &quot;G&quot;
#&gt; 
#&gt; [[3]]
#&gt; [1] &quot;I&quot;
#&gt; 
#&gt; [[4]]
#&gt; [1] &quot;T&quot;
#&gt; 
#&gt; [[5]]
#&gt; [1] &quot;R&quot;
#&gt; 
#&gt; [[6]]
#&gt; [1] &quot;T&quot;

#filter column/attriubte names based on string
ggplot2::diamonds %&gt;%
  dplyr::select_at(dplyr::vars(dplyr::contains(&#39;c&#39;)))
#&gt; # A tibble: 53,940 x 5
#&gt;    carat cut       color clarity price
#&gt;    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;int&gt;
#&gt;  1 0.23  Ideal     E     SI2       326
#&gt;  2 0.21  Premium   E     SI1       326
#&gt;  3 0.23  Good      E     VS1       327
#&gt;  4 0.290 Premium   I     VS2       334
#&gt;  5 0.31  Good      J     SI2       335
#&gt;  6 0.24  Very Good J     VVS2      336
#&gt;  7 0.24  Very Good I     VVS1      336
#&gt;  8 0.26  Very Good H     SI1       337
#&gt;  9 0.22  Fair      E     VS2       337
#&gt; 10 0.23  Very Good H     VS1       338
#&gt; # ... with 53,930 more rows

#filter where attribute value starts with a string
mtcars %&gt;% 
    tibble::rownames_to_column(&quot;model&quot;) %&gt;% 
    dplyr::filter(stringr::str_detect(model, &quot;^Merc&quot;))
#&gt;         model  mpg cyl  disp  hp drat   wt qsec vs am gear carb
#&gt; 1   Merc 240D 24.4   4 146.7  62 3.69 3.19 20.0  1  0    4    2
#&gt; 2    Merc 230 22.8   4 140.8  95 3.92 3.15 22.9  1  0    4    2
#&gt; 3    Merc 280 19.2   6 167.6 123 3.92 3.44 18.3  1  0    4    4
#&gt; 4   Merc 280C 17.8   6 167.6 123 3.92 3.44 18.9  1  0    4    4
#&gt; 5  Merc 450SE 16.4   8 275.8 180 3.07 4.07 17.4  0  0    3    3
#&gt; 6  Merc 450SL 17.3   8 275.8 180 3.07 3.73 17.6  0  0    3    3
#&gt; 7 Merc 450SLC 15.2   8 275.8 180 3.07 3.78 18.0  0  0    3    3

#rename columns/attributes if they contain certain pattern
#in this case replace &#39;.&#39; with &#39;_&#39;
#SOU
nycflights13::weather %&gt;% 
  dplyr::rename_at(
    dplyr::vars(dplyr::contains(&#39;_&#39;)), dplyr::funs(stringr::str_replace(., &quot;_&quot;, &quot;\\.&quot;))
    ) %&gt;% 
  names()
#&gt;  [1] &quot;origin&quot;     &quot;year&quot;       &quot;month&quot;      &quot;day&quot;        &quot;hour&quot;      
#&gt;  [6] &quot;temp&quot;       &quot;dewp&quot;       &quot;humid&quot;      &quot;wind.dir&quot;   &quot;wind.speed&quot;
#&gt; [11] &quot;wind.gust&quot;  &quot;precip&quot;     &quot;pressure&quot;   &quot;visib&quot;      &quot;time.hour&quot;</code></pre>
</div>
<div id="string-filtering-when-using-a-database-and-dbplyr" class="section level3">
<h3>String filtering when using a database and dbplyr</h3>
<p>The previous mentions won’t always work when filtering against data in a database. Reference: <a href="https://github.com/tidyverse/dplyr/issues/3090" class="uri">https://github.com/tidyverse/dplyr/issues/3090</a></p>
<p>Solution from: <a href="https://stackoverflow.com/questions/38962585/pass-sql-functions-in-dplyr-filter-function-on-database/47198795#47198795" class="uri">https://stackoverflow.com/questions/38962585/pass-sql-functions-in-dplyr-filter-function-on-database/47198795#47198795</a></p>
<pre class="r"><code>#load some data into a temp database
con &lt;- DBI::dbConnect(RSQLite::SQLite(), path = &quot;:memory:&quot;)
DBI::dbWriteTable(con, &quot;airports&quot;, nycflights13::airports)

#query the data - name contains &quot;Island&quot; - this is case sensitive
dplyr::tbl(con, &quot;airports&quot;) %&gt;% 
  dplyr::filter(name %like% &quot;%Island%&quot;) %&gt;% 
  head(5)
#&gt; # Source:   lazy query [?? x 8]
#&gt; # Database: sqlite 3.22.0 []
#&gt;   faa   name                      lat    lon   alt    tz dst   tzone       
#&gt;   &lt;chr&gt; &lt;chr&gt;                   &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;       
#&gt; 1 09J   Jekyll Island Airport    31.1  -81.4    11    -5 A     America/New~
#&gt; 2 2B2   Plum Island Airport      42.8  -70.8    11    -5 A     America/New~
#&gt; 3 ANN   Annette Island           55.0 -132.    119    -9 A     America/Anc~
#&gt; 4 BID   Block Island State Air~  41.2  -71.6   108    -5 A     America/New~
#&gt; 5 BRO   Brownsville South Padr~  25.9  -97.4    22    -6 A     America/Chi~</code></pre>
</div>
<div id="create-permutations-of-items-from-multple-vectors" class="section level3">
<h3>Create permutations of items from multple vectors</h3>
<pre class="r"><code>expand.grid(
    c(1, 2),
    c(3, 4),
    c(2, 3))
#&gt;   Var1 Var2 Var3
#&gt; 1    1    3    2
#&gt; 2    2    3    2
#&gt; 3    1    4    2
#&gt; 4    2    4    2
#&gt; 5    1    3    3
#&gt; 6    2    3    3
#&gt; 7    1    4    3
#&gt; 8    2    4    3</code></pre>
</div>
<div id="get-class-names-of-items-in-a-dataframevector" class="section level3">
<h3>Get class names of items in a dataframe/vector</h3>
<pre class="r"><code>sapply(mtcars, class)
#&gt;       mpg       cyl      disp        hp      drat        wt      qsec 
#&gt; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; 
#&gt;        vs        am      gear      carb 
#&gt; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot;</code></pre>
</div>
<div id="printing-more-than-default-rowscolumns-from-a-table" class="section level3">
<h3>Printing more than default rows/columns from a table</h3>
<pre class="r"><code>mtcars %&gt;% dplyr::as_tibble() %&gt;% print(n=15, width = Inf)
#&gt; # A tibble: 32 x 11
#&gt;      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1  21       6  160    110  3.9   2.62  16.5     0     1     4     4
#&gt;  2  21       6  160    110  3.9   2.88  17.0     0     1     4     4
#&gt;  3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
#&gt;  4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
#&gt;  5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
#&gt;  6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
#&gt;  7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
#&gt;  8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
#&gt;  9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
#&gt; 10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
#&gt; 11  17.8     6  168.   123  3.92  3.44  18.9     1     0     4     4
#&gt; 12  16.4     8  276.   180  3.07  4.07  17.4     0     0     3     3
#&gt; 13  17.3     8  276.   180  3.07  3.73  17.6     0     0     3     3
#&gt; 14  15.2     8  276.   180  3.07  3.78  18       0     0     3     3
#&gt; 15  10.4     8  472    205  2.93  5.25  18.0     0     0     3     4
#&gt; # ... with 17 more rows</code></pre>
</div>
<div id="search-all-objects-in-global-environment-for-string" class="section level3">
<h3>Search all objects in global environment for string</h3>
<pre class="r"><code>apropos(&quot;cars&quot;)
#&gt; [1] &quot;cars&quot;   &quot;mtcars&quot;</code></pre>
</div>
<div id="update-packages-after-updating-r" class="section level3">
<h3>Update packages after updating R</h3>
<pre class="r"><code>update.packages(ask = FALSE, checkBuilt = TRUE)</code></pre>
</div>
<div id="timezone-stuff" class="section level3">
<h3>Timezone stuff</h3>
<pre class="r"><code>#Get timezone
Sys.timezone()
#&gt; [1] &quot;America/New_York&quot;

#Get all timezones
OlsonNames() %&gt;% head()
#&gt; [1] &quot;Africa/Abidjan&quot;     &quot;Africa/Accra&quot;       &quot;Africa/Addis_Ababa&quot;
#&gt; [4] &quot;Africa/Algiers&quot;     &quot;Africa/Asmara&quot;      &quot;Africa/Asmera&quot;</code></pre>
</div>
<div id="calculate-minutes-between-two-times" class="section level3">
<h3>Calculate minutes between two times</h3>
<pre class="r"><code>library(lubridate)
#&gt; 
#&gt; Attaching package: &#39;lubridate&#39;
#&gt; The following object is masked from &#39;package:base&#39;:
#&gt; 
#&gt;     date
ymd_hms(&quot;2018-10-25 12:00:00&quot;) %--% ymd_hms(&quot;2018-10-25 13:00:00&quot;) / dminutes(1)
#&gt; [1] 60</code></pre>
</div>
<div id="view-data-exported-by-a-package" class="section level3">
<h3>View data exported by a package</h3>
<pre class="r"><code>data(package = &quot;ggplot2&quot;)</code></pre>
</div>
<div id="browse-vignettes-for-a-given-package" class="section level3">
<h3>Browse vignettes for a given package</h3>
<pre class="r"><code>browseVignettes(package = &quot;dplyr&quot;)</code></pre>
</div>
<div id="open-function-documentation-from-win-rstudio" class="section level3">
<h3>Open function documentation from w/in RStudio</h3>
<p>Use F2</p>
</div>
<div id="create-a-dataframe-with-random-data" class="section level3">
<h3>Create a dataframe with random data</h3>
<pre class="r"><code>#the call to set.seed ensures anyone who runs the code will get the same random number stream. 
set.seed(1)
data.frame(x = rnorm(4), y = rnorm(4), z = sample(LETTERS, 4))
#&gt;            x          y z
#&gt; 1 -0.6264538  0.3295078 S
#&gt; 2  0.1836433 -0.8204684 Y
#&gt; 3 -0.8356286  0.4874291 J
#&gt; 4  1.5952808  0.7383247 R</code></pre>
</div>
<div id="details-about-built-in-data-sets" class="section level3">
<h3>Details about built-in data sets</h3>
<pre class="r"><code>library(help = &quot;datasets&quot;)
data()</code></pre>
</div>
<div id="use-github-to-search-for-packages-using-a-particular-function" class="section level3">
<h3>Use Github to search for packages using a particular function</h3>
<p>Put this into the GitHub search box to see how packages on CRAN use the llply() function from plyr</p>
<pre><code> &quot;llply&quot; user:cran language:R</code></pre>
</div>
<div id="conditional-mutate" class="section level3">
<h3>Conditional mutate</h3>
<p>NOTE: should probably also look at recode here</p>
<pre class="r"><code>nycflights13::airlines %&gt;%
    dplyr::mutate(
        name = dplyr::case_when(
            name == &quot;Virgin America&quot; ~ &quot;Alaska Airlines Inc.&quot;,
            TRUE ~ name)
    )
#&gt; # A tibble: 16 x 2
#&gt;    carrier name                       
#&gt;    &lt;chr&gt;   &lt;chr&gt;                      
#&gt;  1 9E      Endeavor Air Inc.          
#&gt;  2 AA      American Airlines Inc.     
#&gt;  3 AS      Alaska Airlines Inc.       
#&gt;  4 B6      JetBlue Airways            
#&gt;  5 DL      Delta Air Lines Inc.       
#&gt;  6 EV      ExpressJet Airlines Inc.   
#&gt;  7 F9      Frontier Airlines Inc.     
#&gt;  8 FL      AirTran Airways Corporation
#&gt;  9 HA      Hawaiian Airlines Inc.     
#&gt; 10 MQ      Envoy Air                  
#&gt; 11 OO      SkyWest Airlines Inc.      
#&gt; 12 UA      United Air Lines Inc.      
#&gt; 13 US      US Airways Inc.            
#&gt; 14 VX      Alaska Airlines Inc.       
#&gt; 15 WN      Southwest Airlines Co.     
#&gt; 16 YV      Mesa Airlines Inc.</code></pre>
</div>
<div id="extracting-nested-list-into-a-tibble" class="section level3">
<h3>extracting nested list into a tibble</h3>
<p>SOURCE: <a href="https://cfss.uchicago.edu/webdata004_simplifying_lists.html" class="uri">https://cfss.uchicago.edu/webdata004_simplifying_lists.html</a></p>
<pre class="r"><code>my_list &lt;- list(
    list(first = &quot;nick&quot;, last = &quot;vasile&quot;, weight = 170),
    list(first = &quot;bob&quot;, last = &quot;smith&quot;, weight = 150)
)

my_list
#&gt; [[1]]
#&gt; [[1]]$first
#&gt; [1] &quot;nick&quot;
#&gt; 
#&gt; [[1]]$last
#&gt; [1] &quot;vasile&quot;
#&gt; 
#&gt; [[1]]$weight
#&gt; [1] 170
#&gt; 
#&gt; 
#&gt; [[2]]
#&gt; [[2]]$first
#&gt; [1] &quot;bob&quot;
#&gt; 
#&gt; [[2]]$last
#&gt; [1] &quot;smith&quot;
#&gt; 
#&gt; [[2]]$weight
#&gt; [1] 150

purrr::map_df(my_list, magrittr::extract)
#&gt; # A tibble: 2 x 3
#&gt;   first last   weight
#&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;
#&gt; 1 nick  vasile    170
#&gt; 2 bob   smith     150</code></pre>
</div>
<div id="scatterplot-of-all-pairs" class="section level3">
<h3>Scatterplot of all pairs</h3>
<pre class="r"><code>pairs(mtcars)</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
</div>
<div id="interactively-explore-plots" class="section level3">
<h3>Interactively explore plots</h3>
<pre class="r"><code>identify(mtcars$hp, mtcars$mpg, mtcars$mpg)</code></pre>
</div>
<div id="sort-bar-plot-by-counts" class="section level2">
<h2>Sort bar plot by counts</h2>
<pre class="r"><code>nycflights13::flights %&gt;% 
    ggplot2::ggplot(ggplot2::aes(x=forcats::fct_infreq(carrier))) +
    ggplot2::geom_bar()</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<div id="color-coded-correlation-table" class="section level3">
<h3>Color coded correlation table</h3>
<pre class="r"><code>M &lt;- cor(mtcars)
corrplot::corrplot(M, method=&quot;color&quot;)</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
</div>
</div>
