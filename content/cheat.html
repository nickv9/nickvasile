---
title: "Nick's R Cheat Sheet"
author: "Nicholas Vasile"
date: "2019-06-18"
output: 
  blogdown::html_page:
    toc: true
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


<div id="TOC">
<ul>
<li><a href="#selecting-attributes-from-a-data-frame">Selecting attributes from a data frame</a></li>
<li><a href="#subsetting-rows">subsetting rows</a></li>
<li><a href="#filtering-extracting-subsetting-data-frames-based-on-attribute-value">Filtering / extracting / subsetting data frames based on attribute value</a></li>
<li><a href="#exploring-data">Exploring data</a></li>
<li><a href="#prevent-garbage-characters-when-using-read.csv-on-data-exported-from-sql">Prevent garbage characters when using read.csv on data exported from SQL</a></li>
<li><a href="#list-functions-exported-by-a-loaded-package">List functions exported by a loaded package</a></li>
<li><a href="#count-occurrences-of-unique-values">Count occurrences of unique values</a></li>
<li><a href="#check-for-duplicate-values">Check for duplicate values</a></li>
<li><a href="#build-and-install-vignettes">Build and install vignettes</a></li>
<li><a href="#string-filtering">String filtering</a></li>
<li><a href="#string-filtering-when-using-a-database-and-dbplyr">String filtering when using a database and dbplyr</a></li>
<li><a href="#create-permutations-of-items-from-multple-vectors">Create permutations of items from multple vectors</a></li>
<li><a href="#get-class-names-of-items-in-a-dataframevector">Get class names of items in a dataframe/vector</a></li>
<li><a href="#printing-more-than-default-rowscolumns-from-a-table">Printing more than default rows/columns from a table</a></li>
<li><a href="#search-all-objects-including-functions-in-global-environment-for-string">Search all objects, including functions, in global environment for string</a></li>
<li><a href="#search-key-words-or-phrases-in-help-pages-vignettes-or-task-views">Search key words or phrases in help pages, vignettes or task views</a></li>
<li><a href="#update-packages-after-updating-r">Update packages after updating R</a></li>
<li><a href="#timezone-stuff">Timezone stuff</a></li>
<li><a href="#calculate-minutes-between-two-times">Calculate minutes between two times</a></li>
<li><a href="#filter-for-records-within-last-n-years">filter for records within last n years</a></li>
<li><a href="#view-data-exported-by-a-package">View data exported by a package</a></li>
<li><a href="#browse-vignettes-for-a-given-package">Browse vignettes for a given package</a></li>
<li><a href="#open-function-documentation-from-win-rstudio">Open function documentation from w/in RStudio</a></li>
<li><a href="#create-a-dataframe-with-random-data">Create a dataframe with random data</a></li>
<li><a href="#details-about-built-in-data-sets">Details about built-in data sets</a></li>
<li><a href="#use-github-to-search-for-packages-using-a-particular-function">Use Github to search for packages using a particular function</a></li>
<li><a href="#conditional-mutate">Conditional mutate</a></li>
<li><a href="#extracting-nested-list-into-a-tibble">extracting nested list into a tibble</a></li>
<li><a href="#scatterplot-of-all-pairs">Scatterplot of all pairs</a></li>
<li><a href="#interactively-explore-plots">Interactively explore plots</a></li>
<li><a href="#sort-bar-plot-by-counts">Sort bar plot by counts</a></li>
<li><a href="#sort-bar-plot-by-counts---when-using-stat-identity">Sort bar plot by counts - when using stat = “identity”</a></li>
<li><a href="#color-coded-correlation-table">Color coded correlation table</a></li>
<li><a href="#filter-correlations-at-a-cutoff-value">filter correlations at a cutoff value</a></li>
<li><a href="#plot-distribution-of-all-variables">plot distribution of all variables</a></li>
<li><a href="#rmarkdown-insert-date-document-was-knitted">RMarkdown: insert date document was knitted</a></li>
<li><a href="#plot-percentage-of-attributes-that-are-na-for-each-outcome">Plot percentage of attributes that are NA for each outcome</a></li>
<li><a href="#plot-the-pecentage-of-rows-that-has-at-least-1-na-attribute-by-outcome">Plot the pecentage of rows that has at least 1 NA attribute, by outcome</a></li>
<li><a href="#plot-the-attributes-predictors-that-are-most-likely-to-be-missing">Plot the attributes (predictors) that are most likely to be missing</a></li>
<li><a href="#plot-the-attributes-predictors-that-are-most-likely-to-be-missing-by-outcome">Plot the attributes (predictors) that are most likely to be missing, by outcome</a></li>
<li><a href="#create-a-matrix-that-shows-whether-or-not-a-particular-combination-of-values-is-in-the-data">Create a matrix that shows whether or not a particular combination of values is in the data</a></li>
<li><a href="#convert-unix-style-epoch-time-to-human-readable-time">Convert unix style epoch time to human readable time</a></li>
</ul>
</div>

<p><a href="http://info.rstudio.com/G5X0Nw20UEEoN0YS0000JCn">PDF of many of Rstudio’s cheat sheets</a></p>
<p><a href="https://github.com/startupjing/Tech_Notes/blob/master/R/R_language.md">Another R cheat sheet I found useful</a></p>
<div id="selecting-attributes-from-a-data-frame" class="section level3">
<h3>Selecting attributes from a data frame</h3>
<pre class="r"><code># data [row, attribute_name]
iris[ 1, &quot;Species&quot;] 
#&gt; [1] setosa
#&gt; Levels: setosa versicolor virginica

# approach 1: use [[ form of extract operator to extract a column
iris[[&quot;Species&quot;]] %&gt;% 
  head()
#&gt; [1] setosa setosa setosa setosa setosa setosa
#&gt; Levels: setosa versicolor virginica

# approach 2: use variable name in column dimension of data frame
iris[,&quot;Species&quot;] %&gt;% 
  head()
#&gt; [1] setosa setosa setosa setosa setosa setosa
#&gt; Levels: setosa versicolor virginica
# approach 3: use the $ form of extract operator. Note that since this
iris$Species %&gt;% 
  head()
#&gt; [1] setosa setosa setosa setosa setosa setosa
#&gt; Levels: setosa versicolor virginica

#Use individual variables in a pipe
ggplot2::diamonds %&gt;% 
  .$cut %&gt;% 
  head()
#&gt; [1] Ideal     Premium   Good      Premium   Good      Very Good
#&gt; Levels: Fair &lt; Good &lt; Very Good &lt; Premium &lt; Ideal

ggplot2::diamonds %&gt;% 
  dplyr::pull(cut) %&gt;% 
  head()
#&gt; [1] Ideal     Premium   Good      Premium   Good      Very Good
#&gt; Levels: Fair &lt; Good &lt; Very Good &lt; Premium &lt; Ideal</code></pre>
</div>
<div id="subsetting-rows" class="section level3">
<h3>subsetting rows</h3>
<pre class="r"><code># approach 1: use exact row references
# dataframe[rows, columns]
mtcars[20:22,]
#&gt;                   mpg cyl  disp  hp drat    wt  qsec vs am gear carb
#&gt; Toyota Corolla   33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
#&gt; Toyota Corona    21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
#&gt; Dodge Challenger 15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2

# approach 2: use logic in the row dimension of reference
head(mtcars[mtcars$cyl == 4 &amp; mtcars$am == 1,])
#&gt;                 mpg cyl  disp hp drat    wt  qsec vs am gear carb
#&gt; Datsun 710     22.8   4 108.0 93 3.85 2.320 18.61  1  1    4    1
#&gt; Fiat 128       32.4   4  78.7 66 4.08 2.200 19.47  1  1    4    1
#&gt; Honda Civic    30.4   4  75.7 52 4.93 1.615 18.52  1  1    4    2
#&gt; Toyota Corolla 33.9   4  71.1 65 4.22 1.835 19.90  1  1    4    1
#&gt; Fiat X1-9      27.3   4  79.0 66 4.08 1.935 18.90  1  1    4    1
#&gt; Porsche 914-2  26.0   4 120.3 91 4.43 2.140 16.70  0  1    5    2
head(mtcars[mtcars[,&quot;cyl&quot;] == 4,])
#&gt;                 mpg cyl  disp hp drat    wt  qsec vs am gear carb
#&gt; Datsun 710     22.8   4 108.0 93 3.85 2.320 18.61  1  1    4    1
#&gt; Merc 240D      24.4   4 146.7 62 3.69 3.190 20.00  1  0    4    2
#&gt; Merc 230       22.8   4 140.8 95 3.92 3.150 22.90  1  0    4    2
#&gt; Fiat 128       32.4   4  78.7 66 4.08 2.200 19.47  1  1    4    1
#&gt; Honda Civic    30.4   4  75.7 52 4.93 1.615 18.52  1  1    4    2
#&gt; Toyota Corolla 33.9   4  71.1 65 4.22 1.835 19.90  1  1    4    1

# approach 3: use which() function
theSubsetRows &lt;- which(mtcars$cyl == 4)
head(mtcars[theSubsetRows,])
#&gt;                 mpg cyl  disp hp drat    wt  qsec vs am gear carb
#&gt; Datsun 710     22.8   4 108.0 93 3.85 2.320 18.61  1  1    4    1
#&gt; Merc 240D      24.4   4 146.7 62 3.69 3.190 20.00  1  0    4    2
#&gt; Merc 230       22.8   4 140.8 95 3.92 3.150 22.90  1  0    4    2
#&gt; Fiat 128       32.4   4  78.7 66 4.08 2.200 19.47  1  1    4    1
#&gt; Honda Civic    30.4   4  75.7 52 4.93 1.615 18.52  1  1    4    2
#&gt; Toyota Corolla 33.9   4  71.1 65 4.22 1.835 19.90  1  1    4    1

# approach 4: use output from a function that returns a logical
#             array instead of row numbers as in the prior example
head(mtcars[!is.na(mtcars[,&quot;cyl&quot;]),])
#&gt;                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
#&gt; Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
#&gt; Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
#&gt; Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
#&gt; Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
#&gt; Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
#&gt; Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1

# subset all rows with select  columns
# dataframe[, c(&quot;column1&quot;, &quot;column2&quot;)]
head(mtcars[, c(&quot;mpg&quot;, &quot;carb&quot;)])
#&gt;                    mpg carb
#&gt; Mazda RX4         21.0    4
#&gt; Mazda RX4 Wag     21.0    4
#&gt; Datsun 710        22.8    1
#&gt; Hornet 4 Drive    21.4    1
#&gt; Hornet Sportabout 18.7    2
#&gt; Valiant           18.1    1

# subset all rows where attribute matches
# dataframe[dataframe$attribute ==&quot;value&quot;, ] 
mtcars[mtcars$cyl==4,]
#&gt;                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
#&gt; Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
#&gt; Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
#&gt; Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
#&gt; Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
#&gt; Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
#&gt; Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
#&gt; Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
#&gt; Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
#&gt; Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
#&gt; Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
#&gt; Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2


# select all rows and all columns except for a few others
# in this example remove mpg and disp, the first and third columns
mtcars[,-c(1,3)]
#&gt;                     cyl  hp drat    wt  qsec vs am gear carb
#&gt; Mazda RX4             6 110 3.90 2.620 16.46  0  1    4    4
#&gt; Mazda RX4 Wag         6 110 3.90 2.875 17.02  0  1    4    4
#&gt; Datsun 710            4  93 3.85 2.320 18.61  1  1    4    1
#&gt; Hornet 4 Drive        6 110 3.08 3.215 19.44  1  0    3    1
#&gt; Hornet Sportabout     8 175 3.15 3.440 17.02  0  0    3    2
#&gt; Valiant               6 105 2.76 3.460 20.22  1  0    3    1
#&gt; Duster 360            8 245 3.21 3.570 15.84  0  0    3    4
#&gt; Merc 240D             4  62 3.69 3.190 20.00  1  0    4    2
#&gt; Merc 230              4  95 3.92 3.150 22.90  1  0    4    2
#&gt; Merc 280              6 123 3.92 3.440 18.30  1  0    4    4
#&gt; Merc 280C             6 123 3.92 3.440 18.90  1  0    4    4
#&gt; Merc 450SE            8 180 3.07 4.070 17.40  0  0    3    3
#&gt; Merc 450SL            8 180 3.07 3.730 17.60  0  0    3    3
#&gt; Merc 450SLC           8 180 3.07 3.780 18.00  0  0    3    3
#&gt; Cadillac Fleetwood    8 205 2.93 5.250 17.98  0  0    3    4
#&gt; Lincoln Continental   8 215 3.00 5.424 17.82  0  0    3    4
#&gt; Chrysler Imperial     8 230 3.23 5.345 17.42  0  0    3    4
#&gt; Fiat 128              4  66 4.08 2.200 19.47  1  1    4    1
#&gt; Honda Civic           4  52 4.93 1.615 18.52  1  1    4    2
#&gt; Toyota Corolla        4  65 4.22 1.835 19.90  1  1    4    1
#&gt; Toyota Corona         4  97 3.70 2.465 20.01  1  0    3    1
#&gt; Dodge Challenger      8 150 2.76 3.520 16.87  0  0    3    2
#&gt; AMC Javelin           8 150 3.15 3.435 17.30  0  0    3    2
#&gt; Camaro Z28            8 245 3.73 3.840 15.41  0  0    3    4
#&gt; Pontiac Firebird      8 175 3.08 3.845 17.05  0  0    3    2
#&gt; Fiat X1-9             4  66 4.08 1.935 18.90  1  1    4    1
#&gt; Porsche 914-2         4  91 4.43 2.140 16.70  0  1    5    2
#&gt; Lotus Europa          4 113 3.77 1.513 16.90  1  1    5    2
#&gt; Ford Pantera L        8 264 4.22 3.170 14.50  0  1    5    4
#&gt; Ferrari Dino          6 175 3.62 2.770 15.50  0  1    5    6
#&gt; Maserati Bora         8 335 3.54 3.570 14.60  0  1    5    8
#&gt; Volvo 142E            4 109 4.11 2.780 18.60  1  1    4    2

#alternate - if all rows you want to remove are next to each other
mtcars[,-(1:3)]
#&gt;                      hp drat    wt  qsec vs am gear carb
#&gt; Mazda RX4           110 3.90 2.620 16.46  0  1    4    4
#&gt; Mazda RX4 Wag       110 3.90 2.875 17.02  0  1    4    4
#&gt; Datsun 710           93 3.85 2.320 18.61  1  1    4    1
#&gt; Hornet 4 Drive      110 3.08 3.215 19.44  1  0    3    1
#&gt; Hornet Sportabout   175 3.15 3.440 17.02  0  0    3    2
#&gt; Valiant             105 2.76 3.460 20.22  1  0    3    1
#&gt; Duster 360          245 3.21 3.570 15.84  0  0    3    4
#&gt; Merc 240D            62 3.69 3.190 20.00  1  0    4    2
#&gt; Merc 230             95 3.92 3.150 22.90  1  0    4    2
#&gt; Merc 280            123 3.92 3.440 18.30  1  0    4    4
#&gt; Merc 280C           123 3.92 3.440 18.90  1  0    4    4
#&gt; Merc 450SE          180 3.07 4.070 17.40  0  0    3    3
#&gt; Merc 450SL          180 3.07 3.730 17.60  0  0    3    3
#&gt; Merc 450SLC         180 3.07 3.780 18.00  0  0    3    3
#&gt; Cadillac Fleetwood  205 2.93 5.250 17.98  0  0    3    4
#&gt; Lincoln Continental 215 3.00 5.424 17.82  0  0    3    4
#&gt; Chrysler Imperial   230 3.23 5.345 17.42  0  0    3    4
#&gt; Fiat 128             66 4.08 2.200 19.47  1  1    4    1
#&gt; Honda Civic          52 4.93 1.615 18.52  1  1    4    2
#&gt; Toyota Corolla       65 4.22 1.835 19.90  1  1    4    1
#&gt; Toyota Corona        97 3.70 2.465 20.01  1  0    3    1
#&gt; Dodge Challenger    150 2.76 3.520 16.87  0  0    3    2
#&gt; AMC Javelin         150 3.15 3.435 17.30  0  0    3    2
#&gt; Camaro Z28          245 3.73 3.840 15.41  0  0    3    4
#&gt; Pontiac Firebird    175 3.08 3.845 17.05  0  0    3    2
#&gt; Fiat X1-9            66 4.08 1.935 18.90  1  1    4    1
#&gt; Porsche 914-2        91 4.43 2.140 16.70  0  1    5    2
#&gt; Lotus Europa        113 3.77 1.513 16.90  1  1    5    2
#&gt; Ford Pantera L      264 4.22 3.170 14.50  0  1    5    4
#&gt; Ferrari Dino        175 3.62 2.770 15.50  0  1    5    6
#&gt; Maserati Bora       335 3.54 3.570 14.60  0  1    5    8
#&gt; Volvo 142E          109 4.11 2.780 18.60  1  1    4    2</code></pre>
</div>
<div id="filtering-extracting-subsetting-data-frames-based-on-attribute-value" class="section level3">
<h3>Filtering / extracting / subsetting data frames based on attribute value</h3>
<pre class="r"><code>mtcars[which(mtcars$cyl == 4), &quot;mpg&quot;]
#&gt;  [1] 22.8 24.4 22.8 32.4 30.4 33.9 21.5 27.3 26.0 30.4 21.4
subset(mtcars$mpg, mtcars$cyl == 4)
#&gt;  [1] 22.8 24.4 22.8 32.4 30.4 33.9 21.5 27.3 26.0 30.4 21.4</code></pre>
</div>
<div id="exploring-data" class="section level3">
<h3>Exploring data</h3>
<pre class="r"><code>#summary stats from pastecs package
pastecs::stat.desc(mtcars)
#&gt;                      mpg         cyl         disp           hp
#&gt; nbr.val       32.0000000  32.0000000 3.200000e+01   32.0000000
#&gt; nbr.null       0.0000000   0.0000000 0.000000e+00    0.0000000
#&gt; nbr.na         0.0000000   0.0000000 0.000000e+00    0.0000000
#&gt; min           10.4000000   4.0000000 7.110000e+01   52.0000000
#&gt; max           33.9000000   8.0000000 4.720000e+02  335.0000000
#&gt; range         23.5000000   4.0000000 4.009000e+02  283.0000000
#&gt; sum          642.9000000 198.0000000 7.383100e+03 4694.0000000
#&gt; median        19.2000000   6.0000000 1.963000e+02  123.0000000
#&gt; mean          20.0906250   6.1875000 2.307219e+02  146.6875000
#&gt; SE.mean        1.0654240   0.3157093 2.190947e+01   12.1203173
#&gt; CI.mean.0.95   2.1729465   0.6438934 4.468466e+01   24.7195501
#&gt; var           36.3241028   3.1895161 1.536080e+04 4700.8669355
#&gt; std.dev        6.0269481   1.7859216 1.239387e+02   68.5628685
#&gt; coef.var       0.2999881   0.2886338 5.371779e-01    0.4674077
#&gt;                      drat          wt        qsec          vs          am
#&gt; nbr.val       32.00000000  32.0000000  32.0000000 32.00000000 32.00000000
#&gt; nbr.null       0.00000000   0.0000000   0.0000000 18.00000000 19.00000000
#&gt; nbr.na         0.00000000   0.0000000   0.0000000  0.00000000  0.00000000
#&gt; min            2.76000000   1.5130000  14.5000000  0.00000000  0.00000000
#&gt; max            4.93000000   5.4240000  22.9000000  1.00000000  1.00000000
#&gt; range          2.17000000   3.9110000   8.4000000  1.00000000  1.00000000
#&gt; sum          115.09000000 102.9520000 571.1600000 14.00000000 13.00000000
#&gt; median         3.69500000   3.3250000  17.7100000  0.00000000  0.00000000
#&gt; mean           3.59656250   3.2172500  17.8487500  0.43750000  0.40625000
#&gt; SE.mean        0.09451874   0.1729685   0.3158899  0.08909831  0.08820997
#&gt; CI.mean.0.95   0.19277224   0.3527715   0.6442617  0.18171719  0.17990541
#&gt; var            0.28588135   0.9573790   3.1931661  0.25403226  0.24899194
#&gt; std.dev        0.53467874   0.9784574   1.7869432  0.50401613  0.49899092
#&gt; coef.var       0.14866382   0.3041285   0.1001159  1.15203687  1.22828533
#&gt;                     gear       carb
#&gt; nbr.val       32.0000000 32.0000000
#&gt; nbr.null       0.0000000  0.0000000
#&gt; nbr.na         0.0000000  0.0000000
#&gt; min            3.0000000  1.0000000
#&gt; max            5.0000000  8.0000000
#&gt; range          2.0000000  7.0000000
#&gt; sum          118.0000000 90.0000000
#&gt; median         4.0000000  2.0000000
#&gt; mean           3.6875000  2.8125000
#&gt; SE.mean        0.1304266  0.2855297
#&gt; CI.mean.0.95   0.2660067  0.5823417
#&gt; var            0.5443548  2.6088710
#&gt; std.dev        0.7378041  1.6152000
#&gt; coef.var       0.2000825  0.5742933

#Counting NULL values in column
sum(is.na(mtcars$cyl))
#&gt; [1] 0</code></pre>
</div>
<div id="prevent-garbage-characters-when-using-read.csv-on-data-exported-from-sql" class="section level3">
<h3>Prevent garbage characters when using read.csv on data exported from SQL</h3>
<pre class="r"><code>#SOURCE: http://stackoverflow.com/questions/24568056/rs-read-csv-prepending-1st-column-name-with-junk-text
read.csv(file = &quot;my_file.csv&quot;, fileEncoding = &quot;UTF-8-BOM&quot;)</code></pre>
</div>
<div id="list-functions-exported-by-a-loaded-package" class="section level3">
<h3>List functions exported by a loaded package</h3>
<pre class="r"><code>head(ls(&quot;package:base&quot;))
#&gt; [1] &quot;-&quot;         &quot;-.Date&quot;    &quot;-.POSIXt&quot;  &quot;!&quot;         &quot;!.hexmode&quot; &quot;!.octmode&quot;</code></pre>
</div>
<div id="count-occurrences-of-unique-values" class="section level3">
<h3>Count occurrences of unique values</h3>
<pre class="r"><code>table(mtcars$cyl)
#&gt; 
#&gt;  4  6  8 
#&gt; 11  7 14
dplyr::count(mtcars, cyl)
#&gt; # A tibble: 3 x 2
#&gt;     cyl     n
#&gt;   &lt;dbl&gt; &lt;int&gt;
#&gt; 1     4    11
#&gt; 2     6     7
#&gt; 3     8    14
as.data.frame(table(mtcars$cyl))
#&gt;   Var1 Freq
#&gt; 1    4   11
#&gt; 2    6    7
#&gt; 3    8   14

dplyr::count(mtcars, cyl, gear)
#&gt; # A tibble: 8 x 3
#&gt;     cyl  gear     n
#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
#&gt; 1     4     3     1
#&gt; 2     4     4     8
#&gt; 3     4     5     2
#&gt; 4     6     3     2
#&gt; 5     6     4     4
#&gt; 6     6     5     1
#&gt; 7     8     3    12
#&gt; 8     8     5     2
xtabs(~cyl + gear, mtcars)
#&gt;    gear
#&gt; cyl  3  4  5
#&gt;   4  1  8  2
#&gt;   6  2  4  1
#&gt;   8 12  0  2

#Get table with row and column sums
addmargins(table(mtcars$cyl,useNA = &quot;always&quot;))
#&gt; 
#&gt;    4    6    8 &lt;NA&gt;  Sum 
#&gt;   11    7   14    0   32
#Get percentage table
addmargins(sort(prop.table(table(mtcars$cyl,useNA = &quot;always&quot;))))
#&gt; 
#&gt;    &lt;NA&gt;       6       4       8     Sum 
#&gt; 0.00000 0.21875 0.34375 0.43750 1.00000</code></pre>
</div>
<div id="check-for-duplicate-values" class="section level3">
<h3>Check for duplicate values</h3>
<pre class="r"><code>length(unique(nps$email))==nrow(nps)

#pull duplicate values
nycflights13::planes %&gt;%
        dplyr::count(tailnum) %&gt;%
        dplyr::filter(n &gt; 1)

nycflights13::weather %&gt;%
        dplyr::count(year, month, day, hour, origin) %&gt;%
        filter(n &gt; 1)</code></pre>
</div>
<div id="build-and-install-vignettes" class="section level3">
<h3>Build and install vignettes</h3>
<pre class="r"><code>devtools::install(build_vignettes = TRUE)</code></pre>
</div>
<div id="string-filtering" class="section level3">
<h3>String filtering</h3>
<pre class="r"><code>#filter output of names - or any other character vector
row.names(mtcars)[grepl(&quot;Merc&quot;,row.names(mtcars))]
#&gt; [1] &quot;Merc 240D&quot;   &quot;Merc 230&quot;    &quot;Merc 280&quot;    &quot;Merc 280C&quot;   &quot;Merc 450SE&quot; 
#&gt; [6] &quot;Merc 450SL&quot;  &quot;Merc 450SLC&quot;
names(mtcars)[grepl(&quot;c&quot;, names(mtcars))]
#&gt; [1] &quot;cyl&quot;  &quot;qsec&quot; &quot;carb&quot;
grep(&quot;C&quot;, names(mtcars), ignore.case = TRUE, value = TRUE)
#&gt; [1] &quot;cyl&quot;  &quot;qsec&quot; &quot;carb&quot;
grep(&quot;C&quot;, names(mtcars), ignore.case = TRUE, value = FALSE)
#&gt; [1]  2  7 11

#Filter with dplyr where row cointains string
dplyr::filter(ggplot2::diamonds, grepl(&#39;Good&#39;, cut))
#&gt; # A tibble: 16,988 x 10
#&gt;    carat cut       color clarity depth table price     x     y     z
#&gt;    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31
#&gt;  2  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75
#&gt;  3  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48
#&gt;  4  0.24 Very Good I     VVS1     62.3    57   336  3.95  3.98  2.47
#&gt;  5  0.26 Very Good H     SI1      61.9    55   337  4.07  4.11  2.53
#&gt;  6  0.23 Very Good H     VS1      59.4    61   338  4     4.05  2.39
#&gt;  7  0.3  Good      J     SI1      64      55   339  4.25  4.28  2.73
#&gt;  8  0.3  Good      J     SI1      63.4    54   351  4.23  4.29  2.7 
#&gt;  9  0.3  Good      J     SI1      63.8    56   351  4.23  4.26  2.71
#&gt; 10  0.3  Very Good J     SI1      62.7    59   351  4.21  4.27  2.66
#&gt; # ... with 16,978 more rows

#Filter column/attribute of data frame for regex text pattern match
nycflights13::airports %&gt;%
  dplyr::filter(stringr::str_detect(name, &quot;County&quot;)) %&gt;% 
  head()
#&gt; # A tibble: 6 x 8
#&gt;   faa   name                      lat    lon   alt    tz dst   tzone       
#&gt;   &lt;chr&gt; &lt;chr&gt;                   &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;       
#&gt; 1 0G6   Williams County Airport  41.5  -84.5   730    -5 A     America/New~
#&gt; 2 0S9   Jefferson County Intl    48.1 -123.    108    -8 A     America/Los~
#&gt; 3 0W3   Harford County Airport   39.6  -76.2   409    -5 A     America/New~
#&gt; 4 17G   Port Bucyrus-Crawford ~  40.8  -83.0  1003    -5 A     America/New~
#&gt; 5 19A   Jackson County Airport   34.2  -83.6   951    -5 U     America/New~
#&gt; 6 24J   Suwannee County Airport  30.3  -83.0   104    -5 A     America/New~

#Search for, and extract matches
pattern &lt;- &quot;[[:upper:]]&quot;
stringr::sentences %&gt;%
        stringr::str_subset(pattern) %&gt;%
        stringr::str_extract_all(pattern) %&gt;% 
  head()
#&gt; [[1]]
#&gt; [1] &quot;T&quot;
#&gt; 
#&gt; [[2]]
#&gt; [1] &quot;G&quot;
#&gt; 
#&gt; [[3]]
#&gt; [1] &quot;I&quot;
#&gt; 
#&gt; [[4]]
#&gt; [1] &quot;T&quot;
#&gt; 
#&gt; [[5]]
#&gt; [1] &quot;R&quot;
#&gt; 
#&gt; [[6]]
#&gt; [1] &quot;T&quot;

#filter column/attriubte names based on string
ggplot2::diamonds %&gt;%
  dplyr::select_at(dplyr::vars(dplyr::contains(&#39;c&#39;)))
#&gt; # A tibble: 53,940 x 5
#&gt;    carat cut       color clarity price
#&gt;    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;int&gt;
#&gt;  1 0.23  Ideal     E     SI2       326
#&gt;  2 0.21  Premium   E     SI1       326
#&gt;  3 0.23  Good      E     VS1       327
#&gt;  4 0.290 Premium   I     VS2       334
#&gt;  5 0.31  Good      J     SI2       335
#&gt;  6 0.24  Very Good J     VVS2      336
#&gt;  7 0.24  Very Good I     VVS1      336
#&gt;  8 0.26  Very Good H     SI1       337
#&gt;  9 0.22  Fair      E     VS2       337
#&gt; 10 0.23  Very Good H     VS1       338
#&gt; # ... with 53,930 more rows

#filter where attribute value starts with a string
mtcars %&gt;% 
    tibble::rownames_to_column(&quot;model&quot;) %&gt;% 
    dplyr::filter(stringr::str_detect(model, &quot;^Merc&quot;))
#&gt;         model  mpg cyl  disp  hp drat   wt qsec vs am gear carb
#&gt; 1   Merc 240D 24.4   4 146.7  62 3.69 3.19 20.0  1  0    4    2
#&gt; 2    Merc 230 22.8   4 140.8  95 3.92 3.15 22.9  1  0    4    2
#&gt; 3    Merc 280 19.2   6 167.6 123 3.92 3.44 18.3  1  0    4    4
#&gt; 4   Merc 280C 17.8   6 167.6 123 3.92 3.44 18.9  1  0    4    4
#&gt; 5  Merc 450SE 16.4   8 275.8 180 3.07 4.07 17.4  0  0    3    3
#&gt; 6  Merc 450SL 17.3   8 275.8 180 3.07 3.73 17.6  0  0    3    3
#&gt; 7 Merc 450SLC 15.2   8 275.8 180 3.07 3.78 18.0  0  0    3    3

#rename columns/attributes if they contain certain pattern
#in this case replace &#39;.&#39; with &#39;_&#39;
#SOU
nycflights13::weather %&gt;% 
  dplyr::rename_at(
    dplyr::vars(dplyr::contains(&#39;_&#39;)), dplyr::funs(stringr::str_replace(., &quot;_&quot;, &quot;\\.&quot;))
    ) %&gt;% 
  names()
#&gt; Warning: funs() is soft deprecated as of dplyr 0.8.0
#&gt; please use list() instead
#&gt; 
#&gt; # Before:
#&gt; funs(name = f(.)
#&gt; 
#&gt; # After: 
#&gt; list(name = ~f(.))
#&gt; This warning is displayed once per session.
#&gt;  [1] &quot;origin&quot;     &quot;year&quot;       &quot;month&quot;      &quot;day&quot;        &quot;hour&quot;      
#&gt;  [6] &quot;temp&quot;       &quot;dewp&quot;       &quot;humid&quot;      &quot;wind.dir&quot;   &quot;wind.speed&quot;
#&gt; [11] &quot;wind.gust&quot;  &quot;precip&quot;     &quot;pressure&quot;   &quot;visib&quot;      &quot;time.hour&quot;</code></pre>
</div>
<div id="string-filtering-when-using-a-database-and-dbplyr" class="section level3">
<h3>String filtering when using a database and dbplyr</h3>
<p>The previous mentions won’t always work when filtering against data in a database.
Reference: <a href="https://github.com/tidyverse/dplyr/issues/3090" class="uri">https://github.com/tidyverse/dplyr/issues/3090</a></p>
<p>Solution from: <a href="https://stackoverflow.com/questions/38962585/pass-sql-functions-in-dplyr-filter-function-on-database/47198795#47198795" class="uri">https://stackoverflow.com/questions/38962585/pass-sql-functions-in-dplyr-filter-function-on-database/47198795#47198795</a></p>
<pre class="r"><code>#load some data into a temp database
con &lt;- DBI::dbConnect(RSQLite::SQLite(), path = &quot;:memory:&quot;)
DBI::dbWriteTable(con, &quot;airports&quot;, nycflights13::airports)

#query the data - name contains &quot;Island&quot; - this is case sensitive
dplyr::tbl(con, &quot;airports&quot;) %&gt;% 
  dplyr::filter(name %like% &quot;%Island%&quot;) %&gt;% 
  head(5)
#&gt; # Source:   lazy query [?? x 8]
#&gt; # Database: sqlite 3.22.0 []
#&gt;   faa   name                      lat    lon   alt    tz dst   tzone       
#&gt;   &lt;chr&gt; &lt;chr&gt;                   &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;       
#&gt; 1 09J   Jekyll Island Airport    31.1  -81.4    11    -5 A     America/New~
#&gt; 2 2B2   Plum Island Airport      42.8  -70.8    11    -5 A     America/New~
#&gt; 3 ANN   Annette Island           55.0 -132.    119    -9 A     America/Anc~
#&gt; 4 BID   Block Island State Air~  41.2  -71.6   108    -5 A     America/New~
#&gt; 5 BRO   Brownsville South Padr~  25.9  -97.4    22    -6 A     America/Chi~</code></pre>
<p>This works when I test against a Microsoft SQL database but not SQLite. Returns error:
<code>Error in stri_detect_regex(string, pattern, opts_regex = opts(pattern)) : object 'name' not found</code></p>
<pre class="r"><code>#load some data into a temp database
con &lt;- DBI::dbConnect(RSQLite::SQLite(), path = &quot;:memory:&quot;)
DBI::dbWriteTable(con, &quot;airports&quot;, nycflights13::airports)

#query the data - name contains &quot;Island&quot; - this is case sensitive
dplyr::tbl(con, &quot;airports&quot;) %&gt;% 
  dplyr::filter(stringr::str_detect(name, &quot;Island&quot;)) %&gt;% 
  head(5)</code></pre>
</div>
<div id="create-permutations-of-items-from-multple-vectors" class="section level3">
<h3>Create permutations of items from multple vectors</h3>
<pre class="r"><code>expand.grid(
    c(1, 2),
    c(3, 4),
    c(2, 3))
#&gt;   Var1 Var2 Var3
#&gt; 1    1    3    2
#&gt; 2    2    3    2
#&gt; 3    1    4    2
#&gt; 4    2    4    2
#&gt; 5    1    3    3
#&gt; 6    2    3    3
#&gt; 7    1    4    3
#&gt; 8    2    4    3</code></pre>
</div>
<div id="get-class-names-of-items-in-a-dataframevector" class="section level3">
<h3>Get class names of items in a dataframe/vector</h3>
<pre class="r"><code>sapply(mtcars, class)
#&gt;       mpg       cyl      disp        hp      drat        wt      qsec 
#&gt; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; 
#&gt;        vs        am      gear      carb 
#&gt; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot;</code></pre>
</div>
<div id="printing-more-than-default-rowscolumns-from-a-table" class="section level3">
<h3>Printing more than default rows/columns from a table</h3>
<pre class="r"><code>mtcars %&gt;% dplyr::as_tibble() %&gt;% print(n=15, width = Inf)
#&gt; # A tibble: 32 x 11
#&gt;      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1  21       6  160    110  3.9   2.62  16.5     0     1     4     4
#&gt;  2  21       6  160    110  3.9   2.88  17.0     0     1     4     4
#&gt;  3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
#&gt;  4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
#&gt;  5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
#&gt;  6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
#&gt;  7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
#&gt;  8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
#&gt;  9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
#&gt; 10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
#&gt; 11  17.8     6  168.   123  3.92  3.44  18.9     1     0     4     4
#&gt; 12  16.4     8  276.   180  3.07  4.07  17.4     0     0     3     3
#&gt; 13  17.3     8  276.   180  3.07  3.73  17.6     0     0     3     3
#&gt; 14  15.2     8  276.   180  3.07  3.78  18       0     0     3     3
#&gt; 15  10.4     8  472    205  2.93  5.25  18.0     0     0     3     4
#&gt; # ... with 17 more rows</code></pre>
</div>
<div id="search-all-objects-including-functions-in-global-environment-for-string" class="section level3">
<h3>Search all objects, including functions, in global environment for string</h3>
<pre class="r"><code>apropos(&quot;cars&quot;)
#&gt; [1] &quot;cars&quot;   &quot;mtcars&quot;</code></pre>
</div>
<div id="search-key-words-or-phrases-in-help-pages-vignettes-or-task-views" class="section level3">
<h3>Search key words or phrases in help pages, vignettes or task views</h3>
<pre class="r"><code>RSiteSearch(&quot;Microsoft AND SQL&quot;)</code></pre>
</div>
<div id="update-packages-after-updating-r" class="section level3">
<h3>Update packages after updating R</h3>
<pre class="r"><code>update.packages(ask = FALSE, checkBuilt = TRUE)</code></pre>
</div>
<div id="timezone-stuff" class="section level3">
<h3>Timezone stuff</h3>
<pre class="r"><code>#Get timezone
Sys.timezone()
#&gt; [1] &quot;America/New_York&quot;

#Get all timezones
OlsonNames() %&gt;% head()
#&gt; [1] &quot;Africa/Abidjan&quot;     &quot;Africa/Accra&quot;       &quot;Africa/Addis_Ababa&quot;
#&gt; [4] &quot;Africa/Algiers&quot;     &quot;Africa/Asmara&quot;      &quot;Africa/Asmera&quot;</code></pre>
</div>
<div id="calculate-minutes-between-two-times" class="section level3">
<h3>Calculate minutes between two times</h3>
<pre class="r"><code>library(lubridate)
#&gt; 
#&gt; Attaching package: &#39;lubridate&#39;
#&gt; The following object is masked from &#39;package:base&#39;:
#&gt; 
#&gt;     date
ymd_hms(&quot;2018-10-25 12:00:00&quot;) %--% ymd_hms(&quot;2018-10-25 13:00:00&quot;) / dminutes(1)
#&gt; [1] 60</code></pre>
</div>
<div id="filter-for-records-within-last-n-years" class="section level3">
<h3>filter for records within last n years</h3>
<p>works with dbplyr too
this is not a great example but I wanted it to work for at least a few more years.</p>
<pre class="r"><code>hundred_years_ago &lt;- lubridate::today() - lubridate::years(100)

nycflights13::flights %&gt;% 
  dplyr::filter(time_hour &gt;= hundred_years_ago)
#&gt; # A tibble: 336,776 x 19
#&gt;     year month   day dep_time sched_dep_time dep_delay arr_time
#&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
#&gt;  1  2013     1     1      517            515         2      830
#&gt;  2  2013     1     1      533            529         4      850
#&gt;  3  2013     1     1      542            540         2      923
#&gt;  4  2013     1     1      544            545        -1     1004
#&gt;  5  2013     1     1      554            600        -6      812
#&gt;  6  2013     1     1      554            558        -4      740
#&gt;  7  2013     1     1      555            600        -5      913
#&gt;  8  2013     1     1      557            600        -3      709
#&gt;  9  2013     1     1      557            600        -3      838
#&gt; 10  2013     1     1      558            600        -2      753
#&gt; # ... with 336,766 more rows, and 12 more variables: sched_arr_time &lt;int&gt;,
#&gt; #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
#&gt; #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
#&gt; #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="view-data-exported-by-a-package" class="section level3">
<h3>View data exported by a package</h3>
<pre class="r"><code>data(package = &quot;ggplot2&quot;)</code></pre>
</div>
<div id="browse-vignettes-for-a-given-package" class="section level3">
<h3>Browse vignettes for a given package</h3>
<pre class="r"><code>browseVignettes(package = &quot;dplyr&quot;)</code></pre>
</div>
<div id="open-function-documentation-from-win-rstudio" class="section level3">
<h3>Open function documentation from w/in RStudio</h3>
<p>Use F2</p>
</div>
<div id="create-a-dataframe-with-random-data" class="section level3">
<h3>Create a dataframe with random data</h3>
<pre class="r"><code>#the call to set.seed ensures anyone who runs the code will get the same random number stream. 
set.seed(1)
data.frame(x = rnorm(4), y = rnorm(4), z = sample(LETTERS, 4))
#&gt;            x          y z
#&gt; 1 -0.6264538  0.3295078 S
#&gt; 2  0.1836433 -0.8204684 Y
#&gt; 3 -0.8356286  0.4874291 J
#&gt; 4  1.5952808  0.7383247 R</code></pre>
</div>
<div id="details-about-built-in-data-sets" class="section level3">
<h3>Details about built-in data sets</h3>
<pre class="r"><code>library(help = &quot;datasets&quot;)
data()</code></pre>
</div>
<div id="use-github-to-search-for-packages-using-a-particular-function" class="section level3">
<h3>Use Github to search for packages using a particular function</h3>
<p>Put this into the GitHub search box to see how packages on CRAN use the llply() function from plyr</p>
<pre><code> &quot;llply&quot; user:cran language:R</code></pre>
</div>
<div id="conditional-mutate" class="section level3">
<h3>Conditional mutate</h3>
<p>NOTE: should probably also look at recode here</p>
<pre class="r"><code>nycflights13::airlines %&gt;%
    dplyr::mutate(
        name = dplyr::case_when(
            name == &quot;Virgin America&quot; ~ &quot;Alaska Airlines Inc.&quot;,
            TRUE ~ name)
    )
#&gt; # A tibble: 16 x 2
#&gt;    carrier name                       
#&gt;    &lt;chr&gt;   &lt;chr&gt;                      
#&gt;  1 9E      Endeavor Air Inc.          
#&gt;  2 AA      American Airlines Inc.     
#&gt;  3 AS      Alaska Airlines Inc.       
#&gt;  4 B6      JetBlue Airways            
#&gt;  5 DL      Delta Air Lines Inc.       
#&gt;  6 EV      ExpressJet Airlines Inc.   
#&gt;  7 F9      Frontier Airlines Inc.     
#&gt;  8 FL      AirTran Airways Corporation
#&gt;  9 HA      Hawaiian Airlines Inc.     
#&gt; 10 MQ      Envoy Air                  
#&gt; 11 OO      SkyWest Airlines Inc.      
#&gt; 12 UA      United Air Lines Inc.      
#&gt; 13 US      US Airways Inc.            
#&gt; 14 VX      Alaska Airlines Inc.       
#&gt; 15 WN      Southwest Airlines Co.     
#&gt; 16 YV      Mesa Airlines Inc.</code></pre>
</div>
<div id="extracting-nested-list-into-a-tibble" class="section level3">
<h3>extracting nested list into a tibble</h3>
<p>SOURCE: <a href="https://cfss.uchicago.edu/webdata004_simplifying_lists.html" class="uri">https://cfss.uchicago.edu/webdata004_simplifying_lists.html</a></p>
<pre class="r"><code>my_list &lt;- list(
    list(first = &quot;nick&quot;, last = &quot;vasile&quot;, weight = 170),
    list(first = &quot;bob&quot;, last = &quot;smith&quot;, weight = 150)
)

my_list
#&gt; [[1]]
#&gt; [[1]]$first
#&gt; [1] &quot;nick&quot;
#&gt; 
#&gt; [[1]]$last
#&gt; [1] &quot;vasile&quot;
#&gt; 
#&gt; [[1]]$weight
#&gt; [1] 170
#&gt; 
#&gt; 
#&gt; [[2]]
#&gt; [[2]]$first
#&gt; [1] &quot;bob&quot;
#&gt; 
#&gt; [[2]]$last
#&gt; [1] &quot;smith&quot;
#&gt; 
#&gt; [[2]]$weight
#&gt; [1] 150

purrr::map_df(my_list, magrittr::extract)
#&gt; # A tibble: 2 x 3
#&gt;   first last   weight
#&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;
#&gt; 1 nick  vasile    170
#&gt; 2 bob   smith     150</code></pre>
</div>
<div id="scatterplot-of-all-pairs" class="section level3">
<h3>Scatterplot of all pairs</h3>
<pre class="r"><code>pairs(mtcars)</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
</div>
<div id="interactively-explore-plots" class="section level3">
<h3>Interactively explore plots</h3>
<pre class="r"><code>identify(mtcars$hp, mtcars$mpg, mtcars$mpg)</code></pre>
</div>
<div id="sort-bar-plot-by-counts" class="section level3">
<h3>Sort bar plot by counts</h3>
<pre class="r"><code>nycflights13::flights %&gt;% 
    ggplot2::ggplot(ggplot2::aes(x=forcats::fct_infreq(carrier))) +
    ggplot2::geom_bar()</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
</div>
<div id="sort-bar-plot-by-counts---when-using-stat-identity" class="section level3">
<h3>Sort bar plot by counts - when using stat = “identity”</h3>
<pre class="r"><code>avg_delay_by_carrier &lt;- nycflights13::flights %&gt;% 
  dplyr::group_by(carrier) %&gt;% 
  dplyr::summarize(mean_delay = mean(dep_delay, na.rm = TRUE))

avg_delay_by_carrier %&gt;% 
  ggplot2::ggplot(ggplot2::aes(x=reorder(carrier, -mean_delay),
                               y = mean_delay)) +
  ggplot2::geom_bar(stat=&quot;identity&quot;) +
  ggplot2::labs(x = &quot;carrier&quot;) # if you want to set x-axis to original attribute</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
</div>
<div id="color-coded-correlation-table" class="section level3">
<h3>Color coded correlation table</h3>
<pre class="r"><code>M &lt;- cor(mtcars)
corrplot::corrplot(M, method=&quot;color&quot;)</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<p>with clustering</p>
<pre class="r"><code>corrplot::corrplot(M, order = &quot;hclust&quot;)</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
</div>
<div id="filter-correlations-at-a-cutoff-value" class="section level3">
<h3>filter correlations at a cutoff value</h3>
<pre class="r"><code>caret::findCorrelation(M, cutoff = 0.2, verbose = TRUE, names = TRUE)
#&gt; Compare row 2  and column  3 with corr  0.902 
#&gt;   Means:  0.701 vs 0.546 so flagging column 2 
#&gt; Compare row 3  and column  1 with corr  0.848 
#&gt;   Means:  0.658 vs 0.513 so flagging column 3 
#&gt; Compare row 1  and column  6 with corr  0.868 
#&gt;   Means:  0.63 vs 0.483 so flagging column 1 
#&gt; Compare row 6  and column  4 with corr  0.659 
#&gt;   Means:  0.543 vs 0.446 so flagging column 6 
#&gt; Compare row 4  and column  8 with corr  0.723 
#&gt;   Means:  0.5 vs 0.418 so flagging column 4 
#&gt; Compare row 8  and column  5 with corr  0.44 
#&gt;   Means:  0.426 vs 0.394 so flagging column 8 
#&gt; Compare row 5  and column  9 with corr  0.713 
#&gt;   Means:  0.399 vs 0.365 so flagging column 5 
#&gt; Compare row 9  and column  10 with corr  0.794 
#&gt;   Means:  0.36 vs 0.352 so flagging column 9 
#&gt; Compare row 10  and column  11 with corr  0.274 
#&gt;   Means:  0.243 vs 0.339 so flagging column 11 
#&gt; Compare row 10  and column  7 with corr  0.213 
#&gt;   Means:  0.213 vs 0.213 so flagging column 7 
#&gt; All correlations &lt;= 0.2
#&gt;  [1] &quot;cyl&quot;  &quot;disp&quot; &quot;mpg&quot;  &quot;wt&quot;   &quot;hp&quot;   &quot;vs&quot;   &quot;drat&quot; &quot;am&quot;   &quot;carb&quot; &quot;qsec&quot;</code></pre>
<p>I dont really like the formatting here - too hard to match columns - let’s find a better way.</p>
<p>There is <code>corrr::correlations()</code> but not available on CRAN and there is also an open issue with the newest version of dplyr.</p>
<p>Using deprecrated <code>reshape2</code> package because tidyr doesn’t handle matrixs. This is fine for now.</p>
<pre class="r"><code>reshape2::melt(M) %&gt;%
  dplyr::filter(abs(value) &gt; 0.2, Var1 != Var2) %&gt;%
  dplyr::arrange(desc(abs(value))) %&gt;%
  head()
#&gt;   Var1 Var2      value
#&gt; 1 disp  cyl  0.9020329
#&gt; 2  cyl disp  0.9020329
#&gt; 3   wt disp  0.8879799
#&gt; 4 disp   wt  0.8879799
#&gt; 5   wt  mpg -0.8676594
#&gt; 6  mpg   wt -0.8676594</code></pre>
</div>
<div id="plot-distribution-of-all-variables" class="section level3">
<h3>plot distribution of all variables</h3>
<div id="just-the-numeric-variables" class="section level4">
<h4>Just the numeric variables</h4>
<p>SOURCE: (<a href="https://drsimonj.svbtle.com/quick-plot-of-all-variables" class="uri">https://drsimonj.svbtle.com/quick-plot-of-all-variables</a>)</p>
<pre class="r"><code>mtcars %&gt;%
    purrr::keep(is.numeric) %&gt;% 
    tidyr::gather() %&gt;% 
    ggplot2::ggplot(ggplot2::aes(value)) + 
    ggplot2::facet_wrap(~key, scales = &quot;free&quot;) + 
    ggplot2::geom_histogram()
#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
</div>
<div id="all-variables" class="section level4">
<h4>all variables</h4>
<pre class="r"><code>nycflights13::planes[,c(4,9)] %&gt;%
  tidyr::gather() %&gt;% 
  ggplot2::ggplot(ggplot2::aes(value)) + 
  ggplot2::facet_wrap(~key, scales = &quot;free&quot;) + 
  ggplot2::geom_bar(stat = &quot;count&quot;) + 
  ggplot2::coord_flip ()</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
</div>
</div>
<div id="rmarkdown-insert-date-document-was-knitted" class="section level3">
<h3>RMarkdown: insert date document was knitted</h3>
<p>add this to the header:</p>
<p>SOURCE: (<a href="https://stackoverflow.com/questions/23449319/yaml-current-date-in-rmarkdown" class="uri">https://stackoverflow.com/questions/23449319/yaml-current-date-in-rmarkdown</a>)</p>
</div>
<div id="plot-percentage-of-attributes-that-are-na-for-each-outcome" class="section level3">
<h3>Plot percentage of attributes that are NA for each outcome</h3>
<pre class="r"><code>data(Soybean, package = &quot;mlbench&quot;)

# the first column is the outcome variable so we remove it
na_rates &lt;- rowMeans(is.na(Soybean[,-1]))

soybean &lt;- Soybean %&gt;% 
  tibble::add_column(na_rate = na_rates)

soybean %&gt;% 
    dplyr::group_by(Class) %&gt;% 
    dplyr::summarize(mean_na_rate = mean(na_rate)) %&gt;% 
    ggplot2::ggplot(ggplot2::aes(x=Class, y = mean_na_rate, fill = Class)) +
    ggplot2::geom_bar(stat = &quot;identity&quot;) +
    ggplot2::coord_flip() +
    ggplot2::theme(legend.position = &quot;none&quot;)</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
</div>
<div id="plot-the-pecentage-of-rows-that-has-at-least-1-na-attribute-by-outcome" class="section level3">
<h3>Plot the pecentage of rows that has at least 1 NA attribute, by outcome</h3>
<pre class="r"><code>data(Soybean, package = &quot;mlbench&quot;)

na_rates &lt;- rowMeans(is.na(Soybean[,-1]))

soybean &lt;- Soybean %&gt;%
    tibble::add_column(na_rates = na_rates) %&gt;% 
    dplyr::mutate(has_nas = na_rates != 0 )

soybean %&gt;% 
    dplyr::group_by(Class) %&gt;% 
    dplyr::summarize(mean_has_nas = mean(has_nas)) %&gt;% 
    ggplot2::ggplot(ggplot2::aes(x=Class, y = mean_has_nas, fill = Class)) +
    ggplot2::geom_bar(stat = &quot;identity&quot;) +
    ggplot2::coord_flip() +
    ggplot2::theme(legend.position = &quot;none&quot;)</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
</div>
<div id="plot-the-attributes-predictors-that-are-most-likely-to-be-missing" class="section level2">
<h2>Plot the attributes (predictors) that are most likely to be missing</h2>
<pre class="r"><code>data(Soybean, package = &quot;mlbench&quot;)

predictor_na_rate &lt;- data.frame(colMeans(is.na(Soybean[,-1]))) %&gt;% 
    tibble::rownames_to_column(var = &quot;predictor&quot;) %&gt;% 
    dplyr::rename( na_rate = 2)

predictor_na_rate %&gt;% ggplot2::ggplot(ggplot2::aes(x = predictor, y = na_rate,
                                                   fill = predictor )) +
  ggplot2::geom_bar(stat = &quot;identity&quot;) +
  ggplot2::coord_flip() +
  ggplot2::theme(legend.position = &quot;none&quot;)</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
</div>
<div id="plot-the-attributes-predictors-that-are-most-likely-to-be-missing-by-outcome" class="section level2">
<h2>Plot the attributes (predictors) that are most likely to be missing, by outcome</h2>
<pre class="r"><code>data(Soybean, package = &quot;mlbench&quot;)

soybean_l &lt;- Soybean %&gt;% 
  tidyr::gather(-Class, key = &quot;predictor&quot;,value = &quot;value&quot;)
#&gt; Warning: attributes are not identical across measure variables;
#&gt; they will be dropped

soybean_l %&gt;% dplyr::group_by(Class, predictor) %&gt;% 
  dplyr::summarize(na_rate = mean(is.na(value))) %&gt;% 
  ggplot2::ggplot(ggplot2::aes(x=predictor, y = na_rate, fill = predictor)) +
  ggplot2::geom_bar(stat = &quot;identity&quot;) +
  ggplot2::coord_flip() +
  ggplot2::facet_wrap(~Class, scales = &quot;free&quot;) +
  ggplot2::theme(legend.position = &quot;none&quot;)</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
</div>
<div id="create-a-matrix-that-shows-whether-or-not-a-particular-combination-of-values-is-in-the-data" class="section level2">
<h2>Create a matrix that shows whether or not a particular combination of values is in the data</h2>
<p>SOURCE: <a href="https://stackoverflow.com/a/37897416" class="uri">https://stackoverflow.com/a/37897416</a></p>
<pre class="r"><code>mtcars %&gt;% 
  tibble::rownames_to_column(&quot;name&quot;) %&gt;% 
  dplyr::distinct(cyl, gear, has_gear = !is.na(name)) %&gt;% 
  tidyr::complete( cyl, gear) %&gt;% 
  dplyr::mutate(has_gear = dplyr::if_else(is.na(has_gear),FALSE, TRUE)) %&gt;% 
  ggplot2::ggplot(ggplot2::aes(x=cyl, y =gear )) +
  ggplot2::geom_tile(ggplot2::aes(fill = has_gear),color = &quot;white&quot;)</code></pre>
<p><img src="/cheat_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
</div>
<div id="convert-unix-style-epoch-time-to-human-readable-time" class="section level2">
<h2>Convert unix style epoch time to human readable time</h2>
<pre class="r"><code>epoch_time &lt;- 1505249866329

lubridate::as_datetime(epoch_time/1000)
#&gt; [1] &quot;2017-09-12 20:57:46 UTC&quot;</code></pre>
</div>
